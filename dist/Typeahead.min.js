!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("React"),require("classnames"),require("ship-components-outsideclick"),require("ship-components-textinput"));else if("function"==typeof define&&define.amd)define(["React","classnames","ship-components-outsideclick","ship-components-textinput"],t);else{var n="object"==typeof exports?t(require("React"),require("classnames"),require("ship-components-outsideclick"),require("ship-components-textinput")):t(e.React,e.classnames,e["ship-components-outsideclick"],e["ship-components-textinput"]);for(var o in n)("object"==typeof exports?exports:e)[o]=n[o]}}(this,function(e,t,n,o){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=n(2),p=o(u),c=n(3),d=o(c),f=n(6),h=o(f),y=n(8),m=o(y),v=n(7),b=o(v),g=n(4),w=o(g),x=n(1),E=o(x),_=function(e){function t(n){s(this,t);var o=a(this,e.call(this,n));o.state={hide:!0,visible:o.getResults.call(o,n.value,n.options),currentValue:n.value,selected:0};var i=["getResults","handleChange","handleSelected","keyEvent","handleKeyDown","handleBlur","_onEnter","_onUp","_onDown","handleValidate","handleOutsideClick"];return i.forEach(function(e){return o[e]=o[e].bind(o)}),o}return l(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.state.currentValue;e.value!==this.props.value&&(t=e.value);var n=this.getResults(t,e.options);this.setState({currentValue:t,visible:n,selected:0})},t.prototype.getResults=function(e,t){"undefined"==typeof e&&(e="");var n=h["default"].filter(e.toString()||"",t,{pre:"<span class='"+this.props.matchedClass+"'>",post:"</span>",extract:this.props.extract}),o=n.findIndex(function(t){return t.original.value===e});if(o>-1){var i=n.splice(o,1)[0];n.unshift(i)}return this.props.maxVisible&&this.props.maxVisible>0&&(n=n.slice(0,this.props.maxVisible)),n},t.prototype.handleChange=function(e,t){var n=this,o={currentValue:e.target.value,selected:0};o.visible=o.currentValue.length>0?this.getResults(o.currentValue,this.props.options):[],o.hide=!1,1===o.visible.length&&(o.hide=o.visible[0].original.value===e.target.value),this.setState(o,function(){"function"==typeof n.props.onChange&&n.props.onChange({target:{value:n.state.currentValue}}),"function"==typeof t&&t()})},t.prototype.handleSelected=function(e,t){var n=this;if(t.stopPropagation(),"object"!==("undefined"==typeof e?"undefined":r(e)))throw new TypeError("Option is not an object");if(""!==this.state.currentValue.length&&0!==this.state.visible.length){var o={target:{value:e.original.value}};this.handleChange(o,function(){"function"==typeof n.props.onSelected&&n.props.onSelected(e,t);var o={hide:!0};n.props.clearOnSelect&&(o.currentValue="",o.selected=0,o.visible=[]),n.setState(o)})}},t.prototype.keyEvent=function(e){switch(e){case"Enter":return this.state.hide?void 0:this._onEnter;case"ArrowDown":case"Down":return this._onDown;case"ArrowUp":case"Up":return this._onUp;default:return}},t.prototype._onEnter=function(e){this.state.visible[this.state.selected]&&this.handleSelected(this.getSelected(),e)},t.prototype.getSelected=function(){return this.state.visible[this.state.selected]},t.prototype._onUp=function(){var e=this.state.selected;this.setState({selected:e>0?e-1:0})},t.prototype._onDown=function(){var e=this.state.selected,t=this.state.visible.length-1;this.setState({selected:t>e?e+1:t})},t.prototype.stopHiding=function(){this.state.hide===!0&&this.setState({hide:!1})},t.prototype.isSpecialKey=function(e){return["Alt","CapsLock","Control","Fn","Meta","Shift","Tab"].includes(e)},t.prototype.handleKeyDown=function(e){this.isSpecialKey(e.key)&&this.stopHiding();var t=this.keyEvent(e.key);"function"==typeof t&&(e.preventDefault(),t.call(this,e)),"function"==typeof this.props.onKeyDown&&this.props.onKeyDown(e)},t.prototype.handleOutsideClick=function(){this.setState({hide:!0})},t.prototype.handleBlur=function(e){"function"==typeof this.props.onBlur&&this.props.onBlur(e),this.setState({hide:!0})},t.prototype.renderEmpty=function(e){return p["default"].createElement("div",{className:e},p["default"].createElement("div",{className:"typeahead--container"},p["default"].createElement("div",{className:"typeahead--input form-input"},this.state.currentValue)))},t.prototype.handleValidate=function(e){return"function"==typeof this.props.validate?this.props.validate(e,this.getSelected()):!0},t.prototype.render=function(){var e,t=(0,d["default"])("typeahead",this.props.className,(e={},i(e,E["default"].editable,this.props.editable),i(e,"typeahead--editable",this.props.editable),e));return this.props.editable?p["default"].createElement("div",{className:t},p["default"].createElement(b["default"],{className:(0,d["default"])("typeahead--container",E["default"].container),onClick:this.handleOutsideClick.bind(this)},p["default"].createElement("div",null,p["default"].createElement(m["default"],{className:(0,d["default"])("typeahead--input",E["default"].input),onChange:this.handleChange,onKeyDown:this.handleKeyDown,onBlur:this.handleBlur,onFocus:this.props.onFocus,value:this.state.currentValue,validate:this.handleValidate,editable:!0,minRows:1,maxRows:1,label:this.props.placeholder}),this.props.isLoading?p["default"].createElement("span",{className:(0,d["default"])("icon-refresh",E["default"].loading)}):null),p["default"].createElement(w["default"],{empty:this.state.hide||this.props.isLoading?void 0:this.props.empty,selected:this.state.selected,value:this.state.currentValue,extract:this.props.extract,visible:this.state.hide?[]:this.state.visible,onSelected:this.handleSelected}))):this.renderEmpty(t)},t}(p["default"].Component);_.defaultProps={isLoading:!1,editable:!0,empty:!1,options:[],label:"",value:"",placeholder:"",maxVisible:5,clearOnSelect:!1,matchedClass:"typeahead-found",extract:function(e){return e}},t["default"]=_},function(e,t){e.exports={container:"typeahead--container",list:"typeahead--list",item:"typeahead--item",selected:"typeahead--selected",found:"typeahead--found",loading:"typeahead--loading",spin:"typeahead--spin",editable:"typeahead--editable"}},function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(2),l=o(a),u=n(3),p=o(u),c=n(5),d=o(c),f=n(1),h=o(f),y=function(e){function t(){return i(this,t),r(this,e.apply(this,arguments))}return s(t,e),t.prototype.render=function(){var e=this;return this.props.value&&this.props.visible instanceof Array==!0?0===this.props.visible.length&&this.props.empty!==!1?l["default"].createElement("ul",{className:(0,p["default"])("typeahead--list",h["default"].list)},l["default"].createElement(d["default"],{empty:this.props.empty})):l["default"].createElement("ul",{className:(0,p["default"])("typeahead--list",h["default"].list)},this.props.visible.filter(function(e){return e&&e.score&&e.original}).sort(function(e,t){return t.score-e.score}).map(function(t,n){var o=e.props.extract(t.original);return l["default"].createElement(d["default"],{key:o,selected:e.props.selected===n,option:t,onClick:e.props.onSelected.bind(null,t)})})):null},t}(l["default"].Component);t["default"]=y,y.defaultProps={empty:!1,visible:[],onSelected:function(){}}},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=n(2),u=o(l),p=n(3),c=o(p),d=n(1),f=o(d),h=function(e){function t(n){r(this,t);var o=s(this,e.call(this,n));return o.handleMouseDown=o.handleMouseDown.bind(o),o}return a(t,e),t.prototype.handleMouseDown=function(e){e.preventDefault(),"function"==typeof this.props.onClick&&this.props.onClick(e)},t.prototype.render=function(){var e=(0,c["default"])("typeahead--item",f["default"].item,i({"typeahead--selected":this.props.selected},f["default"].selected,this.props.selected));return this.props.empty?u["default"].createElement("li",{className:e},"string"==typeof this.props.empty?this.props.empty:"No Results..."):u["default"].createElement("li",{className:e,onMouseDown:this.handleMouseDown,dangerouslySetInnerHTML:{__html:this.props.option.string}})},t}(u["default"].Component);t["default"]=h,h.defaultProps={empty:!1,option:{original:"",string:""}}},function(e,t,n){!function(){var t={};e.exports=t,t.simpleFilter=function(e,n){return n.filter(function(n){return t.test(e,n)})},t.test=function(e,n){return null!==t.match(e,n)},t.match=function(e,t,n){n=n||{};var o,i=0,r=[],s=t.length,a=0,l=0,u=n.pre||"",p=n.post||"",c=n.caseSensitive&&t||t.toLowerCase();e=n.caseSensitive&&e||e.toLowerCase();for(var d=0;s>d;d++)o=t[d],c[d]===e[i]?(o=u+o+p,i+=1,l+=1+l):l=0,a+=l,r[r.length]=o;return i===e.length?{rendered:r.join(""),score:a}:null},t.filter=function(e,n,o){return o=o||{},n.reduce(function(n,i,r,s){var a=i;o.extract&&(a=o.extract(i));var l=t.match(e,a,o);return null!=l&&(n[n.length]={string:l.rendered,score:l.score,index:r,original:i}),n},[]).sort(function(e,t){var n=t.score-e.score;return n?n:e.index-t.index})}}()},function(e,t){e.exports=n},function(e,t){e.exports=o}])});
//# sourceMappingURL=Typeahead.min.js.map